# Ansible Playbook для развертывания FreeIPA сервера на RedOS

Этот Ansible playbook автоматизирует процесс развертывания сервера FreeIPA на системе, основанной на RedOS. FreeIPA предоставляет интегрированное решение для управления идентификацией, применения политик и контроля доступа.

## Обзор

Playbook выполняет следующие задачи:

1. **Установка необходимых пакетов**: Устанавливает пакеты FreeIPA сервера и DNS, необходимые для настройки.
2. **Конфигурация имени хоста**: Устанавливает имя хоста для сервера.
3. **Настройка FreeIPA сервера**: Выполняет команду `ipa-server-install` для конфигурации сервера FreeIPA с заданными параметрами, включая область, домен, пароль администратора и имя хоста.
4. **Проверка успешности установки**: Проверяет, была ли установка сервера FreeIPA успешной, и прерывает выполнение playbook в случае неудачи.
5. **Запуск и включение служб**: Убедится, что службы FreeIPA и DNS запущены и настроены на автозагрузку.
6. **Настройка брандмауэра**: Открывает необходимые порты брандмауэра для работы FreeIPA и DNS служб.

## Требования

- Ansible 2.9 или выше
- RedOS или совместимая операционная система
- Необходимые права для установки пакетов и конфигурации системы

## Переменные

- `inventory_hostname`: Имя хоста, определенное в инвентарном файле Ansible.
- `ansible_default_ipv4.address`: Автоматически получает адрес IPv4 по умолчанию сервера.

## Использование

1. Отредактируйте файл `hosts`, чтобы включить ваши целевые сервера RedOS в группу `ipa_servers`.
2. Настройте переменные, такие как `--realm`, `--domain` и `--admin-password`, согласно вашим требованиям.
3. Запустите playbook с помощью команды:
   ```bash
   ansible-playbook -i hosts ваш_playbook.yml
   ```

# Ansible Playbook для ввода клиента в домен FreeIPA

Этот Ansible playbook автоматизирует процесс добавления клиентской машины в домен FreeIPA. Он устанавливает необходимые пакеты, настраивает клиентскую машину и выполняет процесс регистрации в домене.

## Обзор

Playbook выполняет следующие задачи:

1. **Установка необходимых пакетов**: Устанавливает пакеты, необходимые для работы клиента FreeIPA, включая `ipa-client`, `oddjob`, `oddjob-mkhomedir` и `sssd`.
2. **Конфигурация имени хоста**: Устанавливает имя хоста для клиентской машины.
3. **Ввод в домен FreeIPA**: Выполняет команду `ipa-client-install` для добавления клиентской машины в домен FreeIPA с заданными параметрами, такими как область, домен, учетная запись администратора и пароль.
4. **Проверка успешности ввода в домен**: Проверяет, был ли клиент успешно добавлен в домен, и завершает выполнение playbook в случае неудачи.
5. **Запуск и включение необходимых служб**: Убедится, что службы `sssd` и `oddjobd` запущены и настроены на автозагрузку.
6. **Настройка брандмауэра**: Открывает необходимые порты брандмауэра для работы FreeIPA и DNS служб.

## Требования

- Ansible 2.9 или выше
- Доступ к рабочему FreeIPA серверу
- Необходимые права для установки пакетов и конфигурации системы

## Переменные

- `inventory_hostname`: Имя хоста, определенное в инвентарном файле Ansible.
- `--principal` и `--password`: Учетная запись администратора и пароль для подключения к серверу FreeIPA.

## Использование

1. Отредактируйте файл `hosts`, чтобы включить ваши клиентские машины в группу `ipa_clients`.
2. Настройте переменные, такие как `--realm`, `--domain`, `--principal` и `--password`, согласно вашим требованиям.
3. Запустите playbook с помощью команды:
   ```bash
   ansible-playbook -i hosts ваш_playbook.yml